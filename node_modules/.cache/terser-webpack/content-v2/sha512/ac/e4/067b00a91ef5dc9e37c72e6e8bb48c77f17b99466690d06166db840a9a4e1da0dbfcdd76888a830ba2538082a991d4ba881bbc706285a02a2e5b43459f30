{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{zrcO:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"UsersModule\",(function(){return users_module_UsersModule}));var fesm2015_forms=__webpack_require__(\"3Pt+\"),common=__webpack_require__(\"ofXK\"),router=__webpack_require__(\"tyNb\"),core=__webpack_require__(\"fXoL\");let layout_component_LayoutComponent=(()=>{class LayoutComponent{}return LayoutComponent.ɵfac=function(t){return new(t||LayoutComponent)},LayoutComponent.ɵcmp=core.Db({type:LayoutComponent,selectors:[[\"ng-component\"]],decls:3,vars:0,consts:[[1,\"p-4\"],[1,\"container\"]],template:function(rf,ctx){1&rf&&(core.Mb(0,\"div\",0),core.Mb(1,\"div\",1),core.Kb(2,\"router-outlet\"),core.Lb(),core.Lb())},directives:[router.e],encapsulation:2}),LayoutComponent})();var first=__webpack_require__(\"SxV6\"),_services=__webpack_require__(\"J9tS\");function ListComponent_tr_15_span_11_Template(rf,ctx){1&rf&&core.Kb(0,\"span\",10)}function ListComponent_tr_15_span_12_Template(rf,ctx){1&rf&&(core.Mb(0,\"span\"),core.fc(1,\"Delete\"),core.Lb())}function ListComponent_tr_15_Template(rf,ctx){if(1&rf){const _r6=core.Nb();core.Mb(0,\"tr\"),core.Mb(1,\"td\"),core.fc(2),core.Lb(),core.Mb(3,\"td\"),core.fc(4),core.Lb(),core.Mb(5,\"td\"),core.fc(6),core.Lb(),core.Mb(7,\"td\",6),core.Mb(8,\"a\",7),core.fc(9,\"Edit\"),core.Lb(),core.Mb(10,\"button\",8),core.Ub(\"click\",(function(){core.bc(_r6);const user_r2=ctx.$implicit;return core.Wb().deleteUser(user_r2.id)})),core.ec(11,ListComponent_tr_15_span_11_Template,1,0,\"span\",9),core.ec(12,ListComponent_tr_15_span_12_Template,2,0,\"span\",5),core.Lb(),core.Lb(),core.Lb()}if(2&rf){const user_r2=ctx.$implicit;core.zb(2),core.gc(user_r2.firstName),core.zb(2),core.gc(user_r2.lastName),core.zb(2),core.gc(user_r2.username),core.zb(2),core.Yb(\"routerLink\",\"edit/\",user_r2.id,\"\"),core.zb(2),core.Xb(\"disabled\",user_r2.isDeleting),core.zb(1),core.Xb(\"ngIf\",user_r2.isDeleting),core.zb(1),core.Xb(\"ngIf\",!user_r2.isDeleting)}}function ListComponent_tr_16_Template(rf,ctx){1&rf&&(core.Mb(0,\"tr\"),core.Mb(1,\"td\",11),core.Kb(2,\"span\",12),core.Lb(),core.Lb())}let list_component_ListComponent=(()=>{class ListComponent{constructor(accountService){this.accountService=accountService,this.users=null}ngOnInit(){this.accountService.getAll().pipe(Object(first.a)()).subscribe(users=>this.users=users)}deleteUser(id){this.users.find(x=>x.id===id).isDeleting=!0,this.accountService.delete(id).pipe(Object(first.a)()).subscribe(()=>{this.users=this.users.filter(x=>x.id!==id)})}}return ListComponent.ɵfac=function(t){return new(t||ListComponent)(core.Jb(_services.a))},ListComponent.ɵcmp=core.Db({type:ListComponent,selectors:[[\"ng-component\"]],decls:17,vars:2,consts:[[\"routerLink\",\"add\",1,\"btn\",\"btn-sm\",\"btn-success\",\"mb-2\"],[1,\"table\",\"table-striped\"],[2,\"width\",\"30%\"],[2,\"width\",\"10%\"],[4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[2,\"white-space\",\"nowrap\"],[1,\"btn\",\"btn-sm\",\"btn-primary\",\"mr-1\",3,\"routerLink\"],[1,\"btn\",\"btn-sm\",\"btn-danger\",\"btn-delete-user\",3,\"disabled\",\"click\"],[\"class\",\"spinner-border spinner-border-sm\",4,\"ngIf\"],[1,\"spinner-border\",\"spinner-border-sm\"],[\"colspan\",\"4\",1,\"text-center\"],[1,\"spinner-border\",\"spinner-border-lg\",\"align-center\"]],template:function(rf,ctx){1&rf&&(core.Mb(0,\"h1\"),core.fc(1,\"Users\"),core.Lb(),core.Mb(2,\"a\",0),core.fc(3,\"Add User\"),core.Lb(),core.Mb(4,\"table\",1),core.Mb(5,\"thead\"),core.Mb(6,\"tr\"),core.Mb(7,\"th\",2),core.fc(8,\"First Name\"),core.Lb(),core.Mb(9,\"th\",2),core.fc(10,\"Last Name\"),core.Lb(),core.Mb(11,\"th\",2),core.fc(12,\"Username\"),core.Lb(),core.Kb(13,\"th\",3),core.Lb(),core.Lb(),core.Mb(14,\"tbody\"),core.ec(15,ListComponent_tr_15_Template,13,7,\"tr\",4),core.ec(16,ListComponent_tr_16_Template,3,0,\"tr\",5),core.Lb(),core.Lb()),2&rf&&(core.zb(15),core.Xb(\"ngForOf\",ctx.users),core.zb(1),core.Xb(\"ngIf\",!ctx.users))},directives:[router.c,common.i,common.j],encapsulation:2}),ListComponent})();function AddEditComponent_h1_0_Template(rf,ctx){1&rf&&(core.Mb(0,\"h1\"),core.fc(1,\"Add User\"),core.Lb())}function AddEditComponent_h1_1_Template(rf,ctx){1&rf&&(core.Mb(0,\"h1\"),core.fc(1,\"Edit User\"),core.Lb())}function AddEditComponent_div_8_div_1_Template(rf,ctx){1&rf&&(core.Mb(0,\"div\"),core.fc(1,\"First Name is required\"),core.Lb())}function AddEditComponent_div_8_Template(rf,ctx){if(1&rf&&(core.Mb(0,\"div\",17),core.ec(1,AddEditComponent_div_8_div_1_Template,2,0,\"div\",0),core.Lb()),2&rf){const ctx_r2=core.Wb();core.zb(1),core.Xb(\"ngIf\",ctx_r2.f.firstName.errors.required)}}function AddEditComponent_div_13_div_1_Template(rf,ctx){1&rf&&(core.Mb(0,\"div\"),core.fc(1,\"Last Name is required\"),core.Lb())}function AddEditComponent_div_13_Template(rf,ctx){if(1&rf&&(core.Mb(0,\"div\",17),core.ec(1,AddEditComponent_div_13_div_1_Template,2,0,\"div\",0),core.Lb()),2&rf){const ctx_r3=core.Wb();core.zb(1),core.Xb(\"ngIf\",ctx_r3.f.lastName.errors.required)}}function AddEditComponent_div_19_div_1_Template(rf,ctx){1&rf&&(core.Mb(0,\"div\"),core.fc(1,\"Username is required\"),core.Lb())}function AddEditComponent_div_19_Template(rf,ctx){if(1&rf&&(core.Mb(0,\"div\",17),core.ec(1,AddEditComponent_div_19_div_1_Template,2,0,\"div\",0),core.Lb()),2&rf){const ctx_r4=core.Wb();core.zb(1),core.Xb(\"ngIf\",ctx_r4.f.username.errors.required)}}function AddEditComponent_em_23_Template(rf,ctx){1&rf&&(core.Mb(0,\"em\"),core.fc(1,\"(Leave blank to keep the same password)\"),core.Lb())}function AddEditComponent_div_25_div_1_Template(rf,ctx){1&rf&&(core.Mb(0,\"div\"),core.fc(1,\"Password is required\"),core.Lb())}function AddEditComponent_div_25_div_2_Template(rf,ctx){1&rf&&(core.Mb(0,\"div\"),core.fc(1,\"Password must be at least 6 characters\"),core.Lb())}function AddEditComponent_div_25_Template(rf,ctx){if(1&rf&&(core.Mb(0,\"div\",17),core.ec(1,AddEditComponent_div_25_div_1_Template,2,0,\"div\",0),core.ec(2,AddEditComponent_div_25_div_2_Template,2,0,\"div\",0),core.Lb()),2&rf){const ctx_r6=core.Wb();core.zb(1),core.Xb(\"ngIf\",ctx_r6.f.password.errors.required),core.zb(1),core.Xb(\"ngIf\",ctx_r6.f.password.errors.minlength)}}function AddEditComponent_span_28_Template(rf,ctx){1&rf&&core.Kb(0,\"span\",18)}const _c0=function(a0){return{\"is-invalid\":a0}};let add_edit_component_AddEditComponent=(()=>{class AddEditComponent{constructor(formBuilder,route,router,accountService,alertService){this.formBuilder=formBuilder,this.route=route,this.router=router,this.accountService=accountService,this.alertService=alertService,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const passwordValidators=[fesm2015_forms.h.minLength(6)];this.isAddMode&&passwordValidators.push(fesm2015_forms.h.required),this.form=this.formBuilder.group({firstName:[\"\",fesm2015_forms.h.required],lastName:[\"\",fesm2015_forms.h.required],username:[\"\",fesm2015_forms.h.required],password:[\"\",passwordValidators]}),this.isAddMode||this.accountService.getById(this.id).pipe(Object(first.a)()).subscribe(x=>{this.f.firstName.setValue(x.firstName),this.f.lastName.setValue(x.lastName),this.f.username.setValue(x.username)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}createUser(){this.accountService.register(this.form.value).pipe(Object(first.a)()).subscribe(data=>{this.alertService.success(\"User added successfully\",{keepAfterRouteChange:!0}),this.router.navigate([\".\",{relativeTo:this.route}])},error=>{this.alertService.error(error),this.loading=!1})}updateUser(){this.accountService.update(this.id,this.form.value).pipe(Object(first.a)()).subscribe(data=>{this.alertService.success(\"Update successful\",{keepAfterRouteChange:!0}),this.router.navigate([\"..\",{relativeTo:this.route}])},error=>{this.alertService.error(error),this.loading=!1})}}return AddEditComponent.ɵfac=function(t){return new(t||AddEditComponent)(core.Jb(fesm2015_forms.b),core.Jb(router.a),core.Jb(router.b),core.Jb(_services.a),core.Jb(_services.b))},AddEditComponent.ɵcmp=core.Db({type:AddEditComponent,selectors:[[\"ng-component\"]],decls:32,vars:22,consts:[[4,\"ngIf\"],[3,\"formGroup\",\"ngSubmit\"],[1,\"form-row\"],[1,\"form-group\",\"col\"],[\"for\",\"firstName\"],[\"type\",\"text\",\"formControlName\",\"firstName\",1,\"form-control\",3,\"ngClass\"],[\"class\",\"invalid-feedback\",4,\"ngIf\"],[\"for\",\"lastName\"],[\"type\",\"text\",\"formControlName\",\"lastName\",1,\"form-control\",3,\"ngClass\"],[\"for\",\"username\"],[\"type\",\"text\",\"formControlName\",\"username\",1,\"form-control\",3,\"ngClass\"],[\"for\",\"password\"],[\"type\",\"password\",\"formControlName\",\"password\",1,\"form-control\",3,\"ngClass\"],[1,\"form-group\"],[1,\"btn\",\"btn-primary\",3,\"disabled\"],[\"class\",\"spinner-border spinner-border-sm mr-1\",4,\"ngIf\"],[\"routerLink\",\"/users\",1,\"btn\",\"btn-link\"],[1,\"invalid-feedback\"],[1,\"spinner-border\",\"spinner-border-sm\",\"mr-1\"]],template:function(rf,ctx){1&rf&&(core.ec(0,AddEditComponent_h1_0_Template,2,0,\"h1\",0),core.ec(1,AddEditComponent_h1_1_Template,2,0,\"h1\",0),core.Mb(2,\"form\",1),core.Ub(\"ngSubmit\",(function(){return ctx.onSubmit()})),core.Mb(3,\"div\",2),core.Mb(4,\"div\",3),core.Mb(5,\"label\",4),core.fc(6,\"First Name\"),core.Lb(),core.Kb(7,\"input\",5),core.ec(8,AddEditComponent_div_8_Template,2,1,\"div\",6),core.Lb(),core.Mb(9,\"div\",3),core.Mb(10,\"label\",7),core.fc(11,\"Last Name\"),core.Lb(),core.Kb(12,\"input\",8),core.ec(13,AddEditComponent_div_13_Template,2,1,\"div\",6),core.Lb(),core.Lb(),core.Mb(14,\"div\",2),core.Mb(15,\"div\",3),core.Mb(16,\"label\",9),core.fc(17,\"Username\"),core.Lb(),core.Kb(18,\"input\",10),core.ec(19,AddEditComponent_div_19_Template,2,1,\"div\",6),core.Lb(),core.Mb(20,\"div\",3),core.Mb(21,\"label\",11),core.fc(22,\" Password \"),core.ec(23,AddEditComponent_em_23_Template,2,0,\"em\",0),core.Lb(),core.Kb(24,\"input\",12),core.ec(25,AddEditComponent_div_25_Template,3,2,\"div\",6),core.Lb(),core.Lb(),core.Mb(26,\"div\",13),core.Mb(27,\"button\",14),core.ec(28,AddEditComponent_span_28_Template,1,0,\"span\",15),core.fc(29,\" Save \"),core.Lb(),core.Mb(30,\"a\",16),core.fc(31,\"Cancel\"),core.Lb(),core.Lb(),core.Lb()),2&rf&&(core.Xb(\"ngIf\",ctx.isAddMode),core.zb(1),core.Xb(\"ngIf\",!ctx.isAddMode),core.zb(1),core.Xb(\"formGroup\",ctx.form),core.zb(5),core.Xb(\"ngClass\",core.Zb(14,_c0,ctx.submitted&&ctx.f.firstName.errors)),core.zb(1),core.Xb(\"ngIf\",ctx.submitted&&ctx.f.firstName.errors),core.zb(4),core.Xb(\"ngClass\",core.Zb(16,_c0,ctx.submitted&&ctx.f.lastName.errors)),core.zb(1),core.Xb(\"ngIf\",ctx.submitted&&ctx.f.lastName.errors),core.zb(5),core.Xb(\"ngClass\",core.Zb(18,_c0,ctx.submitted&&ctx.f.username.errors)),core.zb(1),core.Xb(\"ngIf\",ctx.submitted&&ctx.f.username.errors),core.zb(4),core.Xb(\"ngIf\",!ctx.isAddMode),core.zb(1),core.Xb(\"ngClass\",core.Zb(20,_c0,ctx.submitted&&ctx.f.password.errors)),core.zb(1),core.Xb(\"ngIf\",ctx.submitted&&ctx.f.password.errors),core.zb(2),core.Xb(\"disabled\",ctx.loading),core.zb(1),core.Xb(\"ngIf\",ctx.loading))},directives:[common.j,fesm2015_forms.i,fesm2015_forms.f,fesm2015_forms.d,fesm2015_forms.a,fesm2015_forms.e,fesm2015_forms.c,common.h,router.c],encapsulation:2}),AddEditComponent})();const routes=[{path:\"\",component:layout_component_LayoutComponent,children:[{path:\"\",component:list_component_ListComponent},{path:\"add\",component:add_edit_component_AddEditComponent},{path:\"edit/:id\",component:add_edit_component_AddEditComponent}]}];let users_routing_module_UsersRoutingModule=(()=>{class UsersRoutingModule{}return UsersRoutingModule.ɵmod=core.Hb({type:UsersRoutingModule}),UsersRoutingModule.ɵinj=core.Gb({factory:function(t){return new(t||UsersRoutingModule)},imports:[[router.d.forChild(routes)],router.d]}),UsersRoutingModule})(),users_module_UsersModule=(()=>{class UsersModule{}return UsersModule.ɵmod=core.Hb({type:UsersModule}),UsersModule.ɵinj=core.Gb({factory:function(t){return new(t||UsersModule)},imports:[[common.b,fesm2015_forms.g,users_routing_module_UsersRoutingModule]]}),UsersModule})()}}]);","extractedComments":[]}